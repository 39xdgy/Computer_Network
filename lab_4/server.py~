import socket


IP_addr = '127.0.0.1'
Port = 62
Buffer_size = 1024
client_list = {}
s = socket.socket(socket.AF_INET, socket.DGRAM)
s.bind((IP_addr, Port))
s.listen(1)
conn, addr = s.accept()
print('Connection address', addr)
while(True):
    try:
        message, client_tuple = conn.recvfrom(Buffer_size)
        message = message.decode("utf-8")
        
        if not client_tuple in client_list:
            client_list[client_tuple] = message
            for i in client_list:
                intro = message + " is joined into the chat Room. "
                s.sendto(send_message.encode(), i)

        else:
            for i in client_list:
                nick_name = ''
                if(i == client_tuple):
                    nick_name = client_list[i]
                send_message = nick_name + ": " + message
                s.sendto(send_message.encode(), i)
